Problem to be solved:
The problem is to create a WordPress plugin called "WP Media Crawl" that allows administrators to analyze their website's internal linking structure and improve their SEO rankings. The plugin should provide a back-end admin page where the admin can trigger a crawl, view the crawl results, and generate an HTML sitemap file.

Technical Spec of how it will be solved:
To solve this problem, I created a WordPress plugin called "WP Media Crawl". The plugin consist of multiple classes to handle different functionalities:
The Crawler class: This class handle crawling webpages, extracting internal links, storing results in the database, displaying results on the admin page, and generating an HTML sitemap file.
The DB class: This class handle database operations, including creating the necessary table, inserting and retrieving crawl results.
The Helper class: This class provide helper methods for rendering HTML templates.

Technical decisions made and why:
Namespace: I use the namespace Plugin\WPMedia to encapsulate our plugin's functionality and avoid naming conflicts with other plugins.
Activation, deactivation, and uninstall hooks: I define activation, deactivation, and uninstall hooks to perform specific actions when the plugin is activated, deactivated, or uninstalled. In this case, I create, truncate, and drop the database table associated with the plugin.
Shortcode: I define a shortcode [sitemap] that can be used on the front-end to display the sitemap HTML content generated by the plugin.
DOMDocument class: The DOMDocument class is a built-in PHP class that provides a convenient way to work with XML and HTML documents. In our plugin, I use it to parse and extract information from HTML documents.

How the code itself works and why:
The plugin code consists of several parts:
wp_media_crawl(): This function adds the admin menu pages for the plugin, including "Homepage Crawler" and "Crawl Now". It specifies the callback functions wp_media_render_admin_page() and wp_media_render_crawl_schedule() to render the admin pages.
wp_media_render_admin_page(): This function creates an instance of the Crawler class and calls its getList() method to retrieve the SEO links from the database and display them on the admin page.
wp_media_render_crawl_schedule(): This function creates an instance of the Crawler class and calls its crawl() method to initiate the crawling process, store the crawl results in the database, display the updated list on the admin page, and generate the sitemap HTML file.
wp_media_crawl_event_callback(): This function serves as the callback for the scheduled crawl event. It creates an instance of the Crawler class and calls its crawl() method to perform the crawling process.
wp_media_activate(), wp_media_deactivate(), wp_media_uninstall(): These functions are activation, deactivation, and uninstall hooks that create, truncate, or drop the database table associated with the plugin when the plugin is activated, deactivated, or uninstalled.
The DB class: This class handles database operations. It has methods to create the necessary table, truncate the table, retrieve SEO links from the table, and store crawl results in the table.
The Helper class: This class provides a helper method render_html() to render HTML templates. It takes a template file path and an optional data array, extracts the data variables, includes the template file, and returns the rendered HTML output.
The DOMDocument class: The DOMDocument class is used in the Crawler class to parse and extract information from HTML documents. It represents the entire HTML document as a tree-like structure, allowing easy navigation and manipulation of its elements. In our code, the DOMDocument class is used to load the HTML content of crawled webpages, retrieve anchor elements (<a>), and extract the hyperlink URLs.

How the solution achieves the admin's desired outcome:
The "WP Media Crawl" plugin provides a back-end admin page where the admin can trigger a crawl, view the crawl results, and generate an HTML sitemap file. The admin can access the admin page through the WordPress admin menu. The plugin fulfills the admin's requirement to analyze the website's internal linking structure and improve SEO rankings.